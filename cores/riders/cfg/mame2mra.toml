[global]
author=["jotego"]

[parse]
# this was moved to tmnt2.cpp after MAME 0.251
sourcefile=[ "tmnt.cpp", "xmen.cpp", "asterix.cpp" ]
skip = { bootlegs=true, machines=[
	# in JTTMNT
	"tmnt",
	"mia",
	"punkshot",
	# not covered yet
    "cuebrick",
    "lgtnfght",
    "blswhstl",
    "glfgreat",
    "qgakumon",
    "thndrx2",
    "prmrsocr",
    # dual screen not supported
    "xmen6p",
    # ROM regions names
    "asterix",
]}

# Problem loading NVRAM
debug={setnames=[
	"ssriderseaa",
	"ssridersebd",
	"ssridersebc",
	"ssridersuda",
	"ssridersuac",
	"ssridersuab",
	"ssridersubc",
	"ssridersadd",
	"ssridersabd",
	"ssridersjad",
	"ssridersjac",
	"ssridersjbd",
], machines=[ "tmnt2", "xmen"]}

[buttons]
names = [
    { machine="ssriders", names="Shoot,Jump" },
    { machine="tmnt2",    names="Shoot,Jump" },
]

[header]
info="Offsets for each ROM region. Byte 15 = game selection."
data = [
	{ machine="tmnt2", offset=15, data="01" },
	{ machine="xmen",  offset=15, data="02" },
]
offset = { bits=12, reverse=true, regions=["maincpu","audiocpu","k052109", "obj"] }

[ROM]
regions = [
    { name="maincpu", width=16, reverse=true  },

    { name="audiocpu"  },
    { name="k053260", rename="pcm", machines=[ "ssriders", "tmnt2" ]   },
    { name="k054539", rename="pcm", machines=[ "xmen" ] },

    { name="k052109", width=32 }, # tiles
    # sprites
    { name="k053245", width=32, rename="obj", machines=[ "ssriders", "tmnt2" ] },
    { name="k053246", width=64, rename="obj", machines=[ "xmen" ] },
    { name="eeprom", skip=true }
]
# default configuration to prevent from boot-up error
nvram={	Defaults=[ { setname="ssriders", data="""\
	00 00 01 01 01 01 ff 00 00 00 00 00 00 00 00 00
	03 ff 00 03 01 00 00 20 00 00 00 02 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 fa 19 90 64 45 41 43 00 05 e6"""},
	{ machine="tmnt2", data="""\
    03 cc fc 33 90 63 55 41 41 00 00 00 00 01 01 01
    00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"""},
    { machine="xmen", data="""\
	02 40 fd bf 02 03 00 01 03 00 00 17 00 01 00 00
	00 00 00 00 00 00 00 00 21 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
	00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"""},
] }

order=["maincpu","audiocpu","pcm","k052109","obj"]

patches=[
	# skip the 54-frame wait after displaying the memory check
	{setname="ssriders",offset=0x1a40,data="71 4E 71 4E 71 4E 71 4E 71 4E 71 4E 71 4E 71 4E 71 4E 71 4E"},
	# skip wait after displaying the video grid
	{setname="ssriders",offset=0x1392,data="71 4E"},
]